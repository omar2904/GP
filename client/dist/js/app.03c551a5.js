(function(t){function e(e){for(var r,o,i=e[0],u=e[1],c=e[2],p=0,d=[];p<i.length;p++)o=i[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(t[r]=u[r]);l&&l(e);while(d.length)d.shift()();return s.push.apply(s,c||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,i=1;i<n.length;i++){var u=n[i];0!==a[u]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},s=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var l=u;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"126e":function(t,e,n){},4475:function(t,e,n){"use strict";var r=n("8d4e"),a=n.n(r);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("a026"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t.layout,{tag:"component",attrs:{userAuth:t.userAuth},on:{"log-out":t.handleLogout}},[n("router-view",{attrs:{userAuth:t.userAuth}})],1)},s=[],o=n("5530"),i=n("94ea"),u={name:"App",computed:Object(o["a"])({layout:function(){return this.$route.meta.layout||"default-layout"}},Object(i["c"])(["userAuth"])),methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["logout"])),{},{handleLogout:function(){var t=this;this.logout().then((function(){t.$nextTick().then((function(){t.$router.push({name:"sign-in"})}))}))}})},c=u,l=n("2877"),p=Object(l["a"])(c,a,s,!1,null,null,null),d=p.exports,m=n("8c4f"),h=(n("45fc"),n("b0c0"),n("96cf"),n("1da1")),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"py-5 self-center w-full flex items-center flex-col"},[n("div",{staticClass:"container max-w-md mx-auto flex-1 flex flex-col items-center justify-center px-2"},[n("div",{staticClass:"bg-white px-6 py-8 rounded shadow-md text-black w-full"},[n("h1",{staticClass:"tracking-wide pb-8 text-center text-gray-800"},[t._v("Sign up as user")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"text-field",attrs:{type:"text",name:"first-name",placeholder:"First name"},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"text-field",attrs:{type:"text",name:"last-name",placeholder:"Last name"},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"text-field",attrs:{type:"text",name:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"text-field",attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("button",{staticClass:"button w-full",attrs:{type:"submit"},on:{click:t.onSubmit}},[t._v(" Create Account ")]),t._m(0)]),n("div",{staticClass:"text-gray-dark mt-6"},[t._v(" Already have an account? "),n("router-link",{staticClass:"no-underline border-b border-blue-500 text-blue-500",attrs:{to:"/login"}},[t._v(" Log in ")])],1)])])},v=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text-center text-sm text-gray-dark mt-4"},[t._v(" By signing up, you agree to the "),n("a",{staticClass:"no-underline border-b border-gray-dark text-gray-dark",attrs:{href:"#"}},[t._v(" Terms of Service ")]),t._v(" and "),n("a",{staticClass:"no-underline border-b border-gray-dark text-gray-dark",attrs:{href:"#"}},[t._v(" Privacy Policy ")])])}],g={name:"AuthPage",props:["userAuth"],data:function(){return{email:"",firstName:"",lastName:"",password:"",billingAddressLine:"",billingCity:"",billingState:"",billingPostalCode:"",billingCountry:"",phoneNumber:""}},watch:{userAuth:{handler:function(t){if(t.isAuth){var e=this.$route.query.redirect||"home";return this.$router.push({name:e,query:this.$route.query})}},immediate:!0}},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["updateUserAuth"])),{},{onSubmit:function(){var t=this;this.$http._post("/users",this.$data).then((function(e){return t.updateUserAuth({isAuth:!0,user:e.user})})).catch((function(t){if(t.response)return console.log("Error when attempting to create new user",t,t.response),alert(JSON.stringify(t.response.data))}))}})},b=g,y=Object(l["a"])(b,f,v,!1,null,null,null),w=y.exports,x=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},_=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("div",{},[n("h2",[t._v(" MEVN Boilerplate ")])])])}],k={name:"HomePage"},O=k,A=(n("933a"),Object(l["a"])(O,x,_,!1,null,null,null)),j=A.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"mt-32 w-full flex items-center flex-col"},[n("div",{staticClass:"container max-w-md mx-auto flex flex-col items-center justify-center px-2"},[n("div",{staticClass:"bg-white px-6 py-6 rounded shadow-md text-black w-full"},[n("h1",{staticClass:"tracking-wide pb-6 text-center text-gray-800"},[t._v("Sign in as a user")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"text-field",attrs:{type:"text",name:"email",placeholder:"Email"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"text-field",attrs:{type:"password",name:"password",placeholder:"Password"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),n("button",{staticClass:"button w-full",attrs:{type:"submit"},on:{click:t.onSubmit}},[t._v(" Sign In ")])]),n("div",{staticClass:"text-gray-dark mt-6 tracking-wider text-sm"},[t._v(" Don't have an account? "),n("router-link",{staticClass:"no-underline border-b border-blue-500 text-blue-500",attrs:{to:"/sign-up"}},[t._v(" Sign up here ")])],1)])])},P=[],S={name:"SignInPage",props:["userAuth"],data:function(){return{email:"",password:""}},watch:{userAuth:{handler:function(t){if(t.isAuth){var e=this.$route.query.redirect||"home";return this.$router.push({name:e,query:this.$route.query})}},immediate:!0}},methods:Object(o["a"])(Object(o["a"])({},Object(i["b"])(["updateUserAuth"])),{},{onSubmit:function(){var t=this;this.$http._post("/users/login",{email:this.email,password:this.password}).then((function(e){return t.updateUserAuth({isAuth:!0,user:e.user})})).catch((function(t){if(t.response)return console.log("Error when attempting to login user",t,t.response),alert(JSON.stringify(t.response.data))}))}})},$=S,T=Object(l["a"])($,C,P,!1,null,null,null),N=T.exports,E=n("bfa9"),R=(n("99af"),n("d4ec")),q=n("bee2"),I=n("db82"),U=n.n(I),B=n("a002"),L=n.n(B),M=n("bc3a"),J=n.n(M),D=n("4328"),z=n.n(D),F=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";Object(R["a"])(this,t),this.API_ROOT=e,this.superagent=U.a,this.axios=J.a,this.axios.interceptors.request.use(function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getToken();case 2:return r=e.sent,n.headers.Authorization="Token ".concat(r),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}return Object(q["a"])(t,[{key:"_tokenPlugin",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getToken();case 3:return this.token=e.sent,n.set("Authorization","Token ".concat(this.token||"")),e.abrupt("return",n);case 8:return e.prev=8,e.t0=e["catch"](0),console.log("Error while fetching token from storage.",e.t0),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[0,8]])})));function n(t){return e.apply(this,arguments)}return n}()},{key:"_responseBody",value:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(n){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=n.data.user||n.data.merchant||{},a=r.accessToken,!a){e.next=4;break}return e.next=4,t.setToken(a);case 4:return e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));function n(t){return e.apply(this,arguments)}return n}()},{key:"_del",value:function(t){return this.superagent.del("".concat(this.API_ROOT).concat(t)).then(this._responseBody)}},{key:"_get",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return J.a.get(e?t:"".concat(this.API_ROOT).concat(t),z.a.stringify(n)).then(this._responseBody)}},{key:"_patch",value:function(t,e){return this.superagent.patch("".concat(this.API_ROOT).concat(t),e).then(this._responseBody)}},{key:"_post",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return J.a.post(n?t:"".concat(this.API_ROOT).concat(t),e).then(this._responseBody)}}],[{key:"getToken",value:function(){return L.a.getItem("jwt")}},{key:"setToken",value:function(t){return L.a.setItem("jwt",t)}}]),t}(),H=F;r["a"].use(i["a"]);var V=new E["a"],G=new i["a"].Store({state:{userAuth:{isAuth:!1,user:null}},mutations:{setUserAuth:function(t,e){t.userAuth=Object(o["a"])(Object(o["a"])({},e),{},{user:Object(o["a"])(Object(o["a"])({},e.user),{},{accessToken:void 0})})},resetAuth:function(t){t.userAuth={isAuth:!1,user:null}}},actions:{updateUserAuth:function(t,e){t.commit("setUserAuth",e)},logout:function(t){return H.setToken(""),t.commit("resetAuth")}},plugins:[V.plugin]}),K=[{name:"home",path:"",component:j},{name:"sign-up",path:"/sign-up",component:w},{name:"sign-in",path:"/sign-in",component:N},{name:"secure",path:"/secure",alias:"/protected",component:{template:"\n        <div>\n          This is a protected page-component\n        </div>\n      "},meta:{requireUserAuth:!0}}],Q=new m["a"]({routes:K,mode:"history"});Q.beforeEach(function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e,n,r){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:a=G.state.userAuth.isAuth,e.matched.some((function(t){return t.meta.requireUserAuth}))?a?r():r({name:"login",query:Object(o["a"])(Object(o["a"])({},e.query),{},{redirect:e.name})}):r();case 2:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}());var W=Q,X=(n("4160"),n("159b"),n("3835"));function Y(t,e){var n=e.components,r=void 0!==n&&n;r&&r.forEach((function(e){var n=Object(X["a"])(e,2),r=n[0],a=n[1];r&&a&&t.component(r,a)}))}var Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"default-layout"},[n("nav",[n("ul",[t.userAuth.isAuth?[n("li",[n("router-link",{attrs:{to:"/secure"}},[t._v(" Secure page ")])],1),n("li",[n("a",{attrs:{href:""},on:{click:function(e){return e.preventDefault(),t.$emit("log-out")}}},[t._v(" Sign out ")])])]:[n("li",[n("router-link",{attrs:{to:"/sign-up"}},[t._v(" Sign up ")])],1),n("li",[n("router-link",{attrs:{to:"/sign-in"}},[t._v(" Sign in ")])],1)]],2)]),n("main",{staticClass:"main"},[t._t("default")],2),t._m(0)])},tt=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"w-full flex justify-center text-gray-800 text-xs tracking-widest py-10"},[n("a",{attrs:{href:"https://github.com/john-raymon",target:"_blank"}},[t._v(" Made with 💓love by https://github.com/john-raymon ")])])}],et={name:"DefaultLayout",props:["userAuth"]},nt=et,rt=(n("4475"),Object(l["a"])(nt,Z,tt,!1,null,null,null)),at=rt.exports;n("ba8c");r["a"].use(m["a"]),r["a"].use(Y,{components:[["default-layout",at]]}),r["a"].mixin({beforeCreate:function(){this.$http=new H("/api")}}),r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(d)},router:W,store:G}).$mount("#app")},"8d4e":function(t,e,n){},"933a":function(t,e,n){"use strict";var r=n("126e"),a=n.n(r);a.a},ba8c:function(t,e,n){}});
//# sourceMappingURL=app.03c551a5.js.map